#:import win kivy.core.window.Window
#:set win_height win.height
#:set win_width win.width

#:set img_h 350
#:set img_w 467
#:set x1 win_width/4  
#:set y1 win_height/3 * 2  - img_h/2
#:set img_x x1 - ((img_w - img_h)/2 )


<Root>:
    Preproc_Anim


<RoundImage>:
    texture: None
    size: root.target_w, root.target_h

    canvas:
        StencilPush
        Ellipse:
            pos: self.pos
            size: self.height, self.height
        StencilUse
        Rectangle:
            id: original
            texture: self.texture
            pos: self.x - ((root.target_w - root.target_h)/2),  self.y 
            size: self.width, self.height
        StencilUnUse
        StencilPop

<Preproc_Anim>:
    RoundImage:
        id: blur
        pos: x1*3- img_h/2, y1
        size: root.target_w, root.target_h
        texture: root.create_texture('blur', make_grey=True)
    RoundImage:
        id: grey2alpha
        pos: x1*2- img_h/2, y1
        size: root.target_w, root.target_h
        texture: root.create_texture('grey', make_grey=True)
    RoundImage:
        id: grey
        pos: x1*2- img_h/2, y1
        size: root.target_w, root.target_h
        texture: root.create_texture('grey', make_grey=True)
    RoundImage:
        id: orig2alpha
        pos: x1- img_h/2, y1
        size: root.target_w, root.target_h
        texture: root.create_texture('orig', is_colored=True)
    RoundImage:
        id: original
        pos: x1- img_h/2, y1
        size: root.target_w, root.target_h
        texture: root.create_texture('orig', is_colored=True)

    Label:
        id: text_orig
        text: root.text_orig
        center_x: original.center_x -((root.target_w - root.target_h)/2)
        top: win.height/2 - img_h/4
        text_size: original.h, None
        valign: "top"
    Label:
        id: text_grey
        text: root.text_grey
        center_x: grey.center_x -((root.target_w - root.target_h)/2)
        top: win.height/2 - img_h/4
        text_size: original.h, None
        valign: "top"
    Label:
        id: text_blur
        text: root.text_blur
        center_x: blur.center_x -((root.target_w - root.target_h)/2)
        top: win.height/2 - img_h/4
        text_size: original.h, None
        valign: "top"


